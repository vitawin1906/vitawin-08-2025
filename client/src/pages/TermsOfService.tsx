import { useState, useEffect } from 'react';
import Header from '@/components/Header';
import Footer from '@/components/Footer';
import Cart from '@/components/Cart';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { Input } from '@/components/ui/input';
import { Edit3, Save, X, Lock } from 'lucide-react';

const TermsOfService = () => {
  const [isCartOpen, setIsCartOpen] = useState(false);
  const [isEditing, setIsEditing] = useState(false);
  const [isAuthorized, setIsAuthorized] = useState(false);
  const [content, setContent] = useState({
    title: 'Условия использования',
    lastUpdated: '06 июня 2025',
    fullText: `ООО «Хёрбалсон»
ОГРН: 1242100003760
ИНН: 2100016720
Сайт: https://vitawins.ru

Дата размещения: 06.06.2025 г.

1. ОБЩИЕ ПОЛОЖЕНИЯ

1.1. Настоящие условия использования (далее — Условия) регулируют отношения между пользователями и интернет-магазином VitaWin, принадлежащим ООО «Хёрбалсон».

1.2. Использование сайта означает полное согласие с данными условиями.

1.3. Мы оставляем за собой право изменять данные условия в любое время без предварительного уведомления.

2. РЕГИСТРАЦИЯ И УЧЕТНАЯ ЗАПИСЬ

2.1. Для оформления заказов и участия в реферальной программе необходима регистрация через Telegram.

2.2. Вы обязуетесь предоставлять достоверную информацию и нести ответственность за безопасность своей учетной записи.

2.3. Запрещается создание множественных аккаунтов одним лицом для получения незаконных преимуществ.

3. ЗАКАЗЫ И ОПЛАТА

3.1. Все цены указаны в рублях и включают НДС.

3.2. Оплата осуществляется через безопасные платежные системы.

3.3. Заказ считается принятым после подтверждения оплаты.

3.4. Мы оставляем за собой право отменить заказ в случае технических ошибок или отсутствия товара на складе.

4. ДОСТАВКА

4.1. Доставка осуществляется в пределах Российской Федерации службами СДЭК, Почта России, Яндекс Доставка.

4.2. Сроки и стоимость доставки указываются при оформлении заказа и могут изменяться в зависимости от региона.

4.3. Риск случайной гибели или повреждения товара переходят к покупателю с момента передачи товара.

5. ВОЗВРАТ И ОБМЕН

5.1. Возврат товара возможен в течение 7 дней с момента получения при условии сохранения товарного вида и потребительских свойств.

5.2. Возврат БАД возможен только при наличии производственного брака или существенных недостатков.

5.3. Стоимость обратной доставки при возврате несет покупатель, за исключением случаев брака товара.

6. ОТВЕТСТВЕННОСТЬ И ОГРАНИЧЕНИЯ

6.1. Компания не несет ответственности за неправильное использование продукции.

6.2. Перед применением БАД настоятельно рекомендуется консультация со специалистом.

6.3. Наши продукты не являются лекарственными средствами и не предназначены для диагностики, лечения или предотвращения заболеваний.

7. ИНТЕЛЛЕКТУАЛЬНАЯ СОБСТВЕННОСТЬ

7.1. Все материалы сайта защищены авторским правом и являются собственностью ООО «Хёрбалсон».

7.2. Использование материалов без письменного разрешения запрещено.

7.3. Нарушение авторских прав влечет ответственность в соответствии с действующим законодательством.

8. РЕФЕРАЛЬНАЯ ПРОГРАММА

8.1. ОБЩИЕ УСЛОВИЯ УЧАСТИЯ

8.1.1. Участие в реферальной программе доступно всем зарегистрированным пользователям.

8.1.2. Для участия необходимо получить уникальную реферальную ссылку в личном кабинете.

8.1.3. Участник программы (Реферер) получает вознаграждение за привлечение новых клиентов (Рефералов).

8.2. МЕХАНИЗМ РАБОТЫ

8.2.1. Реферал считается привлеченным, если он зарегистрировался по уникальной ссылке Реферера и совершил первый заказ.

8.2.2. Вознаграждение начисляется только после полной оплаты и получения заказа Рефералом.

8.2.3. Срок действия реферальной связи не ограничен — вознаграждение начисляется с каждого заказа привлеченного клиента.

8.3. РАЗМЕР ВОЗНАГРАЖДЕНИЯ

8.3.1. Стандартная ставка составляет 10% от суммы заказа Реферала.

8.3.2. Для VIP-партнеров действуют повышенные ставки до 15%.

8.3.3. Минимальная сумма заказа для начисления вознаграждения — 1000 рублей.

8.4. ВЫПЛАТА ВОЗНАГРАЖДЕНИЙ

8.4.1. Вознаграждения накапливаются на внутреннем счете участника программы.

8.4.2. Минимальная сумма для вывода — 500 рублей.

8.4.3. Выплаты производятся в течение 7 рабочих дней после подачи заявки.

8.4.4. Доступные способы выплат: банковская карта, электронные кошельки, банковский перевод.

8.5. ОГРАНИЧЕНИЯ И ЗАПРЕТЫ

8.5.1. Запрещается использование спама, навязчивой рекламы и мошеннических схем для привлечения рефералов.

8.5.2. Запрещается самореферальство (регистрация по собственной ссылке).

8.5.3. Запрещается использование контекстной рекламы с брендовыми запросами без письменного согласия.

8.5.4. Мы оставляем за собой право отказать в выплате вознаграждения при нарушении условий программы.

8.6. ОТЧЕТНОСТЬ И КОНТРОЛЬ

8.6.1. Участники программы имеют доступ к детальной статистике в личном кабинете.

8.6.2. Все транзакции фиксируются и могут быть проверены службой контроля качества.

8.6.3. В спорных ситуациях решение принимается администрацией проекта.

9. ПАРТНЕРСКАЯ ПРОГРАММА ДЛЯ БИЗНЕСА

9.1. Для крупных партнеров и представителей бизнеса действуют индивидуальные условия сотрудничества.

9.2. Партнерские соглашения заключаются отдельно и регулируются дополнительными договорами.

9.3. Возможны эксклюзивные условия для региональных представителей.

10. ЗАЩИТА ПЕРСОНАЛЬНЫХ ДАННЫХ

10.1. Мы обязуемся защищать персональные данные пользователей в соответствии с ФЗ-152 "О персональных данных".

10.2. Данные используются исключительно для выполнения обязательств по договору и улучшения качества обслуживания.

10.3. Передача данных третьим лицам осуществляется только с согласия пользователя или в случаях, предусмотренных законом.

11. ИЗМЕНЕНИЯ УСЛОВИЙ

11.1. Компания оставляет за собой право изменять условия использования и реферальной программы.

11.2. Уведомления об изменениях размещаются на сайте.

11.3. Продолжение использования сервиса после изменений означает согласие с новыми условиями.

12. РАЗРЕШЕНИЕ СПОРОВ

12.1. Все споры решаются путем переговоров.

12.2. При невозможности достижения соглашения споры рассматриваются в суде по месту нахождения ответчика.

12.3. К отношениям сторон применяется российское законодательство.

13. КОНТАКТНАЯ ИНФОРМАЦИЯ

По всем вопросам, включая вопросы по реферальной программе, обращайтесь:
- Email: info@vitawins.ru
- Поддержка в Telegram: @vitawins_support
- Рабочие часы: пн-пт 9:00-18:00 (МСК)

Настоящие условия вступают в силу с момента размещения на сайте и действуют до их изменения или отмены.`
  });

  useEffect(() => {
    const userTelegramId = localStorage.getItem('telegramUserId');
    setIsAuthorized(userTelegramId === '131632979');
  }, []);

  const handleSave = () => {
    setIsEditing(false);
  };

  return (
    <div className="min-h-screen bg-white">
      <Header onCartClick={() => setIsCartOpen(true)} />
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="flex justify-between items-center mb-8">
          {isEditing ? (
            <Input
              value={content.title}
              onChange={(e) => setContent({ ...content, title: e.target.value })}
              className="text-3xl font-bold border-none p-0 focus:ring-0"
            />
          ) : (
            <h1 className="text-3xl font-bold text-gray-900">{content.title}</h1>
          )}
          
          {isAuthorized && (
            <div className="flex gap-2">
              {isEditing ? (
                <>
                  <Button onClick={handleSave} size="sm">
                    <Save className="h-4 w-4 mr-2" />
                    Сохранить
                  </Button>
                  <Button onClick={() => setIsEditing(false)} variant="outline" size="sm">
                    <X className="h-4 w-4 mr-2" />
                    Отмена
                  </Button>
                </>
              ) : (
                <Button onClick={() => setIsEditing(true)} variant="outline" size="sm">
                  <Edit3 className="h-4 w-4 mr-2" />
                  Редактировать
                </Button>
              )}
            </div>
          )}
        </div>

        <div className="mb-6">
          {isEditing && isAuthorized ? (
            <Input
              value={content.lastUpdated}
              onChange={(e) => setContent({ ...content, lastUpdated: e.target.value })}
              className="text-sm text-gray-600 border-none p-0 focus:ring-0"
            />
          ) : (
            <p className="text-sm text-gray-600">Последнее обновление: {content.lastUpdated}</p>
          )}
        </div>

        <div className="bg-white border border-gray-200 rounded-lg p-6">
          {isEditing && isAuthorized ? (
            <Textarea
              value={content.fullText}
              onChange={(e) => setContent({ ...content, fullText: e.target.value })}
              rows={25}
              className="w-full resize-none text-gray-700 leading-relaxed"
              placeholder="Введите полный текст условий использования..."
            />
          ) : (
            <div className="prose max-w-none">
              <pre className="whitespace-pre-wrap text-gray-700 leading-relaxed font-sans bg-[#ffffff]">
                {content.fullText}
              </pre>
            </div>
          )}
        </div>
      </div>
      <Footer />
      <Cart isOpen={isCartOpen} onClose={() => setIsCartOpen(false)} />
    </div>
  );
};

export default TermsOfService;